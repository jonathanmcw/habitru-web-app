{% extends "layout.html" %}
{% block main %}    
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const bubbles = document.querySelectorAll(".bubble-sm");
        bubbles.forEach((bubble) => {
            bubble.addEventListener("mouseover", (e) => {
                const mouseX = e.pageX;
                const mouseY = e.pageY;
                const bubbleInFocus = document.createElement("div");
                bubbleInFocus.classList.add("bubbleInFocus");
                document.body.appendChild(bubbleInFocus);
                bubbleInFocus.style.left = `${e.pageX - 12}px`;
                bubbleInFocus.style.top = `${e.pageY - 12}px`;
            });
            bubble.addEventListener("mouseout", () => {
                const bubbleInFocus = document.querySelector(".bubbleInFocus");
                if (bubbleInFocus) {
                    bubbleInFocus.remove();
                }
            });
        });
    });
</script>


    <div class="nav">
        <div class="left">
            <!-- <a href="/profile">Profile</a> -->
            <h1 class="year">2025</h1>
        </div>
        <div class="middle">
            <a href="/daily_view">Daily</a> | 
            <strong>Monthly</strong>
        </div>
        <div class="right">
            <button class="add-habit-item">+</button>
        </div>
    </div>
    <!-- <h1>summary goes here</h1> -->
    <div id="monthly-view" class="container">
        {% for habit in range(2) %}
        <h2 class="habit-name">Habit {{habit}}</h2>
        <div class="content">
            {% for week in range(52) %}
            <div class="week-col">
                {% for day in range(7) %}
                  <div id="habit-{{habit}}-day-{{week * 7 + day + 1}}" class="bubble-sm"></div>
                {% endfor %}
            </div>

            {% endfor %}
        </div>
        {% endfor %}
        
        <!-- {% for month in months %}
            <h2 class="month">{{month}}</h2>
            <table>
                <tr>
                    {% for date in dates %}
                    <th>{{ date }}</th>
                    {% endfor %}
                    <td></td>
                </tr>
                {% for tracker in habits %}
                <tr>
                    {% for i in range(30) %}
                    <td><div class="bubble-sm"></div></td>
                    {% endfor %}
                    <td><strong>{{ tracker['name']}}</strong> {{ tracker['value'] }}</td>
                </tr>
                {% endfor %}
            </table>
        {% endfor %} -->
    </div>

<!-- 
    <h1>2025 Jan</h1>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                {% for habit in habits %}
                    <th class="rotated-text">{{ habit['name'] }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in transposed_data %}
            <tr>
                <td>{{ row.date }}</td>
                {% for habit in row.habits %}
                <td><div class="bubble-sm"></div></td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table> -->

    <!-- {% for i in range(30) %}
        <p>{{ i }}</p>
    {% endfor %} -->
{% endblock %}

